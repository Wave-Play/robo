import { PermissionFlagsBits } from 'discord.js'
import { getState, setState } from 'robo.js'
import { dbNameSpace } from '../../consts.js'
export const config = {
	description: 'Delete a tag you no longer need.',
	dmPermission: false,
	options: [
		{
			name: 'tag',
			description: 'Enter tag name',
			type: 'string',
			required: true
		}
	]
}
export default async (interaction) => {
	const tagName = interaction.options.get('tag')?.value ?? ''
	if (!interaction.member || !interaction.memberPermissions?.has(PermissionFlagsBits.ManageGuild)) {
		return {
			content: "Sorry, you're not authorized to manage tags.",
			ephemeral: true
		}
	}
	const TAG = getState(tagName.trim().replaceAll(' ', '-'), {
		namespace: dbNameSpace()
	})
	if (!TAG) {
		return 'No tag exists with that name.'
	} else {
		setState(tagName.trim().toLowerCase().replaceAll(' ', '-'), '', {
			namespace: dbNameSpace()
		})
		return 'Tag has been deleted.'
	}
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VzZXIvcm9iby5qcy90ZW1wbGF0ZXMvZGlzY29yZC1ib3RzL3RhZ2JvdC9zcmMvY29tbWFuZHMvdGFnL2RlbGV0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21tYW5kSW50ZXJhY3Rpb24sIFBlcm1pc3Npb25GbGFnc0JpdHMgfSBmcm9tICdkaXNjb3JkLmpzJ1xuaW1wb3J0IHsgZ2V0U3RhdGUsIHNldFN0YXRlLCB0eXBlIENvbW1hbmRDb25maWcsIHR5cGUgQ29tbWFuZFJlc3VsdCB9IGZyb20gJ3JvYm8uanMnXG5pbXBvcnQgeyBkYk5hbWVTcGFjZSB9IGZyb20gJy4uLy4uL2NvbnN0cydcblxuZXhwb3J0IGNvbnN0IGNvbmZpZzogQ29tbWFuZENvbmZpZyA9IHtcblx0ZGVzY3JpcHRpb246ICdEZWxldGUgYSB0YWcgeW91IG5vIGxvbmdlciBuZWVkLicsXG5cdGRtUGVybWlzc2lvbjogZmFsc2UsXG5cdG9wdGlvbnM6IFtcblx0XHR7XG5cdFx0XHRuYW1lOiAndGFnJyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnRW50ZXIgdGFnIG5hbWUnLFxuXHRcdFx0dHlwZTogJ3N0cmluZycsXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZVxuXHRcdH1cblx0XVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoaW50ZXJhY3Rpb246IENvbW1hbmRJbnRlcmFjdGlvbik6IFByb21pc2U8Q29tbWFuZFJlc3VsdD4gPT4ge1xuXHRjb25zdCB0YWdOYW1lID0gKGludGVyYWN0aW9uLm9wdGlvbnMuZ2V0KCd0YWcnKT8udmFsdWUgYXMgc3RyaW5nKSA/PyAnJ1xuXG5cdGlmICghaW50ZXJhY3Rpb24ubWVtYmVyIHx8ICFpbnRlcmFjdGlvbi5tZW1iZXJQZXJtaXNzaW9ucz8uaGFzKFBlcm1pc3Npb25GbGFnc0JpdHMuTWFuYWdlR3VpbGQpKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGNvbnRlbnQ6IFwiU29ycnksIHlvdSdyZSBub3QgYXV0aG9yaXplZCB0byBtYW5hZ2UgdGFncy5cIixcblx0XHRcdGVwaGVtZXJhbDogdHJ1ZVxuXHRcdH1cblx0fVxuXG5cdGNvbnN0IFRBRyA9IGdldFN0YXRlKHRhZ05hbWUudHJpbSgpLnJlcGxhY2VBbGwoJyAnLCAnLScpLCB7XG5cdFx0bmFtZXNwYWNlOiBkYk5hbWVTcGFjZSgpXG5cdH0pXG5cblx0aWYgKCFUQUcpIHtcblx0XHRyZXR1cm4gJ05vIHRhZyBleGlzdHMgd2l0aCB0aGF0IG5hbWUuJ1xuXHR9IGVsc2Uge1xuXHRcdHNldFN0YXRlKHRhZ05hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgnICcsICctJyksICcnLCB7XG5cdFx0XHRuYW1lc3BhY2U6IGRiTmFtZVNwYWNlKClcblx0XHR9KVxuXHRcdHJldHVybiAnVGFnIGhhcyBiZWVuIGRlbGV0ZWQuJ1xuXHR9XG59XG4iXSwibmFtZXMiOlsiUGVybWlzc2lvbkZsYWdzQml0cyIsImdldFN0YXRlIiwic2V0U3RhdGUiLCJkYk5hbWVTcGFjZSIsImNvbmZpZyIsImRlc2NyaXB0aW9uIiwiZG1QZXJtaXNzaW9uIiwib3B0aW9ucyIsIm5hbWUiLCJ0eXBlIiwicmVxdWlyZWQiLCJpbnRlcmFjdGlvbiIsInRhZ05hbWUiLCJnZXQiLCJ2YWx1ZSIsIm1lbWJlciIsIm1lbWJlclBlcm1pc3Npb25zIiwiaGFzIiwiTWFuYWdlR3VpbGQiLCJjb250ZW50IiwiZXBoZW1lcmFsIiwiVEFHIiwidHJpbSIsInJlcGxhY2VBbGwiLCJuYW1lc3BhY2UiLCJ0b0xvd2VyQ2FzZSJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBNkJBLG1CQUFtQixRQUFRLGFBQVk7QUFDcEUsU0FBU0MsUUFBUSxFQUFFQyxRQUFRLFFBQWdELFVBQVM7QUFDcEYsU0FBU0MsV0FBVyxRQUFRLGtCQUFjO0FBRTFDLE9BQU8sTUFBTUMsU0FBd0I7SUFDcENDLGFBQWE7SUFDYkMsY0FBYztJQUNkQyxTQUFTO1FBQ1I7WUFDQ0MsTUFBTTtZQUNOSCxhQUFhO1lBQ2JJLE1BQU07WUFDTkMsVUFBVTtRQUNYO0tBQ0E7QUFDRixFQUFDO0FBRUQsZUFBZSxDQUFBLE9BQU9DO0lBQ3JCLE1BQU1DLFVBQVUsQUFBQ0QsWUFBWUosT0FBTyxDQUFDTSxHQUFHLENBQUMsUUFBUUMsU0FBb0I7SUFFckUsSUFBSSxDQUFDSCxZQUFZSSxNQUFNLElBQUksQ0FBQ0osWUFBWUssaUJBQWlCLEVBQUVDLElBQUlqQixvQkFBb0JrQixXQUFXLEdBQUc7UUFDaEcsT0FBTztZQUNOQyxTQUFTO1lBQ1RDLFdBQVc7UUFDWjtJQUNEO0lBRUEsTUFBTUMsTUFBTXBCLFNBQVNXLFFBQVFVLElBQUksR0FBR0MsVUFBVSxDQUFDLEtBQUssTUFBTTtRQUN6REMsV0FBV3JCO0lBQ1o7SUFFQSxJQUFJLENBQUNrQixLQUFLO1FBQ1QsT0FBTztJQUNSLE9BQU87UUFDTm5CLFNBQVNVLFFBQVFVLElBQUksR0FBR0csV0FBVyxHQUFHRixVQUFVLENBQUMsS0FBSyxNQUFNLElBQUk7WUFDL0RDLFdBQVdyQjtRQUNaO1FBQ0EsT0FBTztJQUNSO0FBQ0QsQ0FBQSxFQUFDIn0=
