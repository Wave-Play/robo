import { PermissionFlagsBits } from 'discord.js'
import { setState } from 'robo.js'
import { dbNameSpace } from '../../consts.js'
export const config = {
	description: 'Save a tag for quick reference',
	dmPermission: false,
	options: [
		{
			name: 'tag',
			description: 'Enter tag name',
			type: 'string',
			required: true
		},
		{
			name: 'content',
			description: 'Content for this tag',
			type: 'string',
			required: true
		}
	]
}
export default async (interaction) => {
	const tagName = interaction.options.get('tag')?.value ?? ''
	const tagContent = interaction.options.get('content')?.value ?? ''
	if (!interaction.member || !interaction.memberPermissions?.has(PermissionFlagsBits.ManageGuild)) {
		return {
			content: "Sorry, you're not authorized to manage tags.",
			ephemeral: true
		}
	}
	setState(tagName.trim().toLowerCase().replaceAll(' ', '-'), tagContent, {
		namespace: dbNameSpace(),
		persist: true
	})
	return `Your tag has been saved. Use \`/tag use tag:${tagName}\` to display it.`
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VzZXIvcm9iby5qcy90ZW1wbGF0ZXMvZGlzY29yZC1ib3RzL3RhZ2JvdC9zcmMvY29tbWFuZHMvdGFnL2NyZWF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21tYW5kSW50ZXJhY3Rpb24sIFBlcm1pc3Npb25GbGFnc0JpdHMgfSBmcm9tICdkaXNjb3JkLmpzJ1xuaW1wb3J0IHsgc2V0U3RhdGUsIHR5cGUgQ29tbWFuZENvbmZpZywgdHlwZSBDb21tYW5kUmVzdWx0IH0gZnJvbSAncm9iby5qcydcbmltcG9ydCB7IGRiTmFtZVNwYWNlIH0gZnJvbSAnLi4vLi4vY29uc3RzJ1xuXG5leHBvcnQgY29uc3QgY29uZmlnOiBDb21tYW5kQ29uZmlnID0ge1xuXHRkZXNjcmlwdGlvbjogJ1NhdmUgYSB0YWcgZm9yIHF1aWNrIHJlZmVyZW5jZScsXG5cdGRtUGVybWlzc2lvbjogZmFsc2UsXG5cdG9wdGlvbnM6IFtcblx0XHR7XG5cdFx0XHRuYW1lOiAndGFnJyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnRW50ZXIgdGFnIG5hbWUnLFxuXHRcdFx0dHlwZTogJ3N0cmluZycsXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0bmFtZTogJ2NvbnRlbnQnLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdDb250ZW50IGZvciB0aGlzIHRhZycsXG5cdFx0XHR0eXBlOiAnc3RyaW5nJyxcblx0XHRcdHJlcXVpcmVkOiB0cnVlXG5cdFx0fVxuXHRdXG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIChpbnRlcmFjdGlvbjogQ29tbWFuZEludGVyYWN0aW9uKTogUHJvbWlzZTxDb21tYW5kUmVzdWx0PiA9PiB7XG5cdGNvbnN0IHRhZ05hbWUgPSAoaW50ZXJhY3Rpb24ub3B0aW9ucy5nZXQoJ3RhZycpPy52YWx1ZSBhcyBzdHJpbmcpID8/ICcnXG5cdGNvbnN0IHRhZ0NvbnRlbnQgPSAoaW50ZXJhY3Rpb24ub3B0aW9ucy5nZXQoJ2NvbnRlbnQnKT8udmFsdWUgYXMgc3RyaW5nKSA/PyAnJ1xuXG5cdGlmICghaW50ZXJhY3Rpb24ubWVtYmVyIHx8ICFpbnRlcmFjdGlvbi5tZW1iZXJQZXJtaXNzaW9ucz8uaGFzKFBlcm1pc3Npb25GbGFnc0JpdHMuTWFuYWdlR3VpbGQpKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGNvbnRlbnQ6IFwiU29ycnksIHlvdSdyZSBub3QgYXV0aG9yaXplZCB0byBtYW5hZ2UgdGFncy5cIixcblx0XHRcdGVwaGVtZXJhbDogdHJ1ZVxuXHRcdH1cblx0fVxuXG5cdHNldFN0YXRlKHRhZ05hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgnICcsICctJyksIHRhZ0NvbnRlbnQsIHtcblx0XHRuYW1lc3BhY2U6IGRiTmFtZVNwYWNlKCksXG5cdFx0cGVyc2lzdDogdHJ1ZVxuXHR9KVxuXHRyZXR1cm4gYFlvdXIgdGFnIGhhcyBiZWVuIHNhdmVkLiBVc2UgXFxgL3RhZyB1c2UgdGFnOiR7dGFnTmFtZX1cXGAgdG8gZGlzcGxheSBpdC5gXG59XG4iXSwibmFtZXMiOlsiUGVybWlzc2lvbkZsYWdzQml0cyIsInNldFN0YXRlIiwiZGJOYW1lU3BhY2UiLCJjb25maWciLCJkZXNjcmlwdGlvbiIsImRtUGVybWlzc2lvbiIsIm9wdGlvbnMiLCJuYW1lIiwidHlwZSIsInJlcXVpcmVkIiwiaW50ZXJhY3Rpb24iLCJ0YWdOYW1lIiwiZ2V0IiwidmFsdWUiLCJ0YWdDb250ZW50IiwibWVtYmVyIiwibWVtYmVyUGVybWlzc2lvbnMiLCJoYXMiLCJNYW5hZ2VHdWlsZCIsImNvbnRlbnQiLCJlcGhlbWVyYWwiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlQWxsIiwibmFtZXNwYWNlIiwicGVyc2lzdCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBNkJBLG1CQUFtQixRQUFRLGFBQVk7QUFDcEUsU0FBU0MsUUFBUSxRQUFnRCxVQUFTO0FBQzFFLFNBQVNDLFdBQVcsUUFBUSxrQkFBYztBQUUxQyxPQUFPLE1BQU1DLFNBQXdCO0lBQ3BDQyxhQUFhO0lBQ2JDLGNBQWM7SUFDZEMsU0FBUztRQUNSO1lBQ0NDLE1BQU07WUFDTkgsYUFBYTtZQUNiSSxNQUFNO1lBQ05DLFVBQVU7UUFDWDtRQUNBO1lBQ0NGLE1BQU07WUFDTkgsYUFBYTtZQUNiSSxNQUFNO1lBQ05DLFVBQVU7UUFDWDtLQUNBO0FBQ0YsRUFBQztBQUVELGVBQWUsQ0FBQSxPQUFPQztJQUNyQixNQUFNQyxVQUFVLEFBQUNELFlBQVlKLE9BQU8sQ0FBQ00sR0FBRyxDQUFDLFFBQVFDLFNBQW9CO0lBQ3JFLE1BQU1DLGFBQWEsQUFBQ0osWUFBWUosT0FBTyxDQUFDTSxHQUFHLENBQUMsWUFBWUMsU0FBb0I7SUFFNUUsSUFBSSxDQUFDSCxZQUFZSyxNQUFNLElBQUksQ0FBQ0wsWUFBWU0saUJBQWlCLEVBQUVDLElBQUlqQixvQkFBb0JrQixXQUFXLEdBQUc7UUFDaEcsT0FBTztZQUNOQyxTQUFTO1lBQ1RDLFdBQVc7UUFDWjtJQUNEO0lBRUFuQixTQUFTVSxRQUFRVSxJQUFJLEdBQUdDLFdBQVcsR0FBR0MsVUFBVSxDQUFDLEtBQUssTUFBTVQsWUFBWTtRQUN2RVUsV0FBV3RCO1FBQ1h1QixTQUFTO0lBQ1Y7SUFDQSxPQUFPLENBQUMsNENBQTRDLEVBQUVkLFFBQVEsaUJBQWlCLENBQUM7QUFDakYsQ0FBQSxFQUFDIn0=
